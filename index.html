<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name = "viewport" content = "initial-scale=1.0, width=device-width">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="apple-touch-icon" href="img/heart.png">
	<link rel="icon" href="favicon.ico">
	<meta name="description" content="Hearts card game with HTML5.">
	<meta name="keywords" content="Hearts HTML5 JavaScript">
	<meta name="author" content="Yao Yujian">
	<meta charset="UTF-8">
	<title>Hearts</title>
	<link rel='stylesheet' href='style.css' type='text/css' />
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#111" />
</head>
<body ontouchstart="">
	<div id = 'main-button-group'>
		<button class = 'main-button newgame-but'>新遊戲</button>
		<button class = 'main-button' id = 'settings-but'>設定</button>
	</div>
	<div id = 'game-region'></div>
	<div id = 'control-region' hidden>
		<div id = 'settings-dialog' hidden>
			<h3>設定</h3>
			<table>
				<tbody>
					<tr>
						<th>玩家</th>
						<th>名稱</th>
						<th>等級</th>
					</tr>
					<tr>
						<td>玩家 1(你):</td>
						<td class = 'player-set-name one' contentEditable></td>
					</tr>
					<tr>
						<td>玩家 2(東):</td>
						<td class = 'player-set-name two' contentEditable></td>
						<td class = 'player-diff two'>
							<input type="number" min="1" max="4">
						</td>
					</tr>
					<tr>
						<td>玩家 3(北):</td>
						<td class = 'player-set-name three' contentEditable></td>
						<td class = 'player-diff three'>
							<input type="number" min="1" max="4">
						</td>
					</tr>
					<tr>
						<td>玩家 4(西):</td>
						<td class = 'player-set-name four' contentEditable></td>
						<td class = 'player-diff four'>
							<input type="number" min="1" max="4">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<button class="back-but">返回</button>
		<button class="newgame-but">套用</button>
	</div>
	<script data-main='js/main' src='js/lib/require.js'></script>
	<script>

	if ('serviceWorker' in navigator) {
	  window.addEventListener('load', function() {
	    navigator.serviceWorker.register('sw.js');
	  });
	}

	let deferredPrompt;
	const installBtn = document.getElementById('install-pwa');
	window.addEventListener('beforeinstallprompt', (e) => {
	  e.preventDefault();
	  deferredPrompt = e;
	  installBtn.style.display = 'block';
	});
	installBtn && installBtn.addEventListener('click', async () => {
	  if (deferredPrompt) {
	    deferredPrompt.prompt();
	    const { outcome } = await deferredPrompt.userChoice;
	    if (outcome === 'accepted') {
	      installBtn.style.display = 'none';
	    }
	    deferredPrompt = null;
	  }
	});

	</script>
</body>
</html>
